{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/my-geek-blog/src/components/CustomPopup.tsx"],"sourcesContent":["import { motion, AnimatePresence } from \"framer-motion\";\nimport { CheckCircle, XCircle } from \"lucide-react\";\nimport { useEffect, useState } from \"react\";\nimport { createPortal } from \"react-dom\";\n\ninterface CustomPopupProps {\n    isOpen: boolean;\n    onClose: () => void;\n    message: string;\n    type: \"success\" | \"error\";\n    title?: string;\n}\n\nexport default function CustomPopup({ isOpen, onClose, message, type, title }: CustomPopupProps) {\n    const [mounted, setMounted] = useState(false);\n\n    useEffect(() => {\n        setMounted(true);\n        if (isOpen) {\n            document.body.style.overflow = 'hidden';\n        } else {\n            document.body.style.overflow = 'unset';\n        }\n        return () => {\n            document.body.style.overflow = 'unset';\n        };\n    }, [isOpen]);\n\n    if (!mounted) return null;\n\n    return createPortal(\n        <AnimatePresence>\n            {isOpen && (\n                <>\n                    <motion.div\n                        initial={{ opacity: 0 }}\n                        animate={{ opacity: 1 }}\n                        exit={{ opacity: 0 }}\n                        className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-[9999]\"\n                        onClick={onClose}\n                    />\n                    <motion.div\n                        initial={{ opacity: 0, scale: 0.9, y: 20 }}\n                        animate={{ opacity: 1, scale: 1, y: 0 }}\n                        exit={{ opacity: 0, scale: 0.9, y: 20 }}\n                        transition={{ type: \"spring\", stiffness: 300, damping: 25 }}\n                        className=\"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-md bg-[#0c0c0c] border border-slate-800 rounded-2xl p-8 z-[10000] shadow-2xl overflow-hidden\"\n                    >\n                        {/* Geeky background elements */}\n                        <div className=\"absolute inset-0 pointer-events-none opacity-20\"\n                             style={{\n                                 backgroundImage: `radial-gradient(${type === 'success' ? '#22c55e' : '#ef4444'} 1px, transparent 1px)`,\n                                 backgroundSize: '20px 20px'\n                             }}\n                        />\n                        <div className={`absolute top-0 left-0 w-full h-1 ${type === 'success' ? 'bg-green-500' : 'bg-red-500'} shadow-[0_0_10px_rgba(34,197,94,0.5)]`} />\n\n                        <div className=\"relative z-10 flex flex-col items-center text-center\">\n                            <div className={`mb-4 p-4 rounded-full ${type === 'success' ? 'bg-green-500/10 text-green-500' : 'bg-red-500/10 text-red-500'}`}>\n                                {type === 'success' ? (\n                                    <CheckCircle size={48} className=\"animate-pulse\" />\n                                ) : (\n                                    <XCircle size={48} className=\"animate-pulse\" />\n                                )}\n                            </div>\n\n                            <h2 className=\"text-xl font-bold text-white mb-2 tracking-wider\">\n                                {title || (type === 'success' ? '系统提示' : '系统错误')}\n                            </h2>\n                            \n                            <p className=\"text-gray-300 mb-8 font-mono text-sm leading-relaxed\">\n                                {message}\n                            </p>\n\n                            <button\n                                onClick={onClose}\n                                className={`w-full py-3 rounded-lg font-bold transition-all transform hover:scale-[1.02] active:scale-[0.98] \n                                    ${type === 'success' \n                                        ? 'bg-green-600 hover:bg-green-500 text-white shadow-[0_0_15px_rgba(34,197,94,0.4)]' \n                                        : 'bg-red-600 hover:bg-red-500 text-white shadow-[0_0_15px_rgba(239,68,68,0.4)]'\n                                    }`}\n                            >\n                                {type === 'success' ? '确定' : '关闭'}\n                            </button>\n                        </div>\n                    </motion.div>\n                </>\n            )}\n        </AnimatePresence>,\n        document.body\n    );\n}\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AACA;AAAA;AACA;AACA;;;;;;AAUe,SAAS,YAAY,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAoB;IAC3F,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACN,WAAW;QACX,IAAI,QAAQ;YACR,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;QACnC,OAAO;YACH,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;QACnC;QACA,OAAO;YACH,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG;QACnC;IACJ,GAAG;QAAC;KAAO;IAEX,IAAI,CAAC,SAAS,OAAO;IAErB,qBAAO,IAAA,4NAAY,gBACf,8OAAC,4MAAe;kBACX,wBACG;;8BACI,8OAAC,oMAAM,CAAC,GAAG;oBACP,SAAS;wBAAE,SAAS;oBAAE;oBACtB,SAAS;wBAAE,SAAS;oBAAE;oBACtB,MAAM;wBAAE,SAAS;oBAAE;oBACnB,WAAU;oBACV,SAAS;;;;;;8BAEb,8OAAC,oMAAM,CAAC,GAAG;oBACP,SAAS;wBAAE,SAAS;wBAAG,OAAO;wBAAK,GAAG;oBAAG;oBACzC,SAAS;wBAAE,SAAS;wBAAG,OAAO;wBAAG,GAAG;oBAAE;oBACtC,MAAM;wBAAE,SAAS;wBAAG,OAAO;wBAAK,GAAG;oBAAG;oBACtC,YAAY;wBAAE,MAAM;wBAAU,WAAW;wBAAK,SAAS;oBAAG;oBAC1D,WAAU;;sCAGV,8OAAC;4BAAI,WAAU;4BACV,OAAO;gCACH,iBAAiB,CAAC,gBAAgB,EAAE,SAAS,YAAY,YAAY,UAAU,sBAAsB,CAAC;gCACtG,gBAAgB;4BACpB;;;;;;sCAEL,8OAAC;4BAAI,WAAW,CAAC,iCAAiC,EAAE,SAAS,YAAY,iBAAiB,aAAa,sCAAsC,CAAC;;;;;;sCAE9I,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAI,WAAW,CAAC,sBAAsB,EAAE,SAAS,YAAY,mCAAmC,8BAA8B;8CAC1H,SAAS,0BACN,8OAAC,0OAAW;wCAAC,MAAM;wCAAI,WAAU;;;;;6DAEjC,8OAAC,uNAAO;wCAAC,MAAM;wCAAI,WAAU;;;;;;;;;;;8CAIrC,8OAAC;oCAAG,WAAU;8CACT,SAAS,CAAC,SAAS,YAAY,SAAS,MAAM;;;;;;8CAGnD,8OAAC;oCAAE,WAAU;8CACR;;;;;;8CAGL,8OAAC;oCACG,SAAS;oCACT,WAAW,CAAC;oCACR,EAAE,SAAS,YACL,qFACA,gFACJ;8CAEL,SAAS,YAAY,OAAO;;;;;;;;;;;;;;;;;;;;;;;;cAOrD,SAAS,IAAI;AAErB"}},
    {"offset": {"line": 178, "column": 0}, "map": {"version":3,"sources":["file:///E:/my-geek-blog/src/components/CommentsSection.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useRef } from \"react\";\nimport type { ReactNode } from \"react\";\nimport Image from \"next/image\";\nimport { Send, Loader2, Trash2, MessageSquare, MapPin, Monitor } from \"lucide-react\";\nimport CustomPopup from \"./CustomPopup\";\n\nimport { MD5 } from \"crypto-js\";\nimport UAParser from \"ua-parser-js\";\n\n\n// Interface definitions based on demo\ninterface Comment {\n    coid: number;\n    cid: number;\n    created: number;\n    author: string;\n    authorId: string;\n    ownerId: string;\n    mail: string;\n    url: string | null;\n    ip: string;\n    agent: string;\n    text: string;\n    type: string;\n    status: string;\n    parent: string;\n    stars: string;\n}\n\ninterface CommentTree extends Comment {\n    children: CommentTree[];\n}\n\ninterface CommentsSectionProps {\n    postId: string;\n    isAdmin: boolean;\n}\n\n// Helper to get all descendant comments\nfunction getAllDescendants(comments: Comment[], parentId: string): Comment[] {\n    const result: Comment[] = [];\n    function findChildren(pid: string) {\n        comments.forEach(c => {\n            if (c.parent === pid) {\n                result.push(c);\n                findChildren(c.coid.toString());\n            }\n        });\n    }\n    findChildren(parentId);\n    return result;\n}\n\nconst CommentItem = ({\n                         comment,\n                         allComments,\n                         onReply,\n                         isAdmin,\n                         onDelete,\n                         deletingId,\n                         locationMap\n                     }: {\n    comment: Comment;\n    allComments: Comment[];\n    onReply: (author: string, parentId: string) => void;\n    isAdmin: boolean;\n    onDelete: (id: string) => void;\n    deletingId: string | null;\n    locationMap: Record<string, string>;\n}) => {\n    const descendants = getAllDescendants(allComments, comment.coid.toString());\n\n    const parseEmoji = (text: string) => {\n        const parts: (string | ReactNode)[] = [];\n        let lastIndex = 0;\n        const regex = /::furry:(\\d+)::/g;\n        let match;\n\n        while ((match = regex.exec(text)) !== null) {\n            if (match.index > lastIndex) {\n                parts.push(text.substring(lastIndex, match.index));\n            }\n            parts.push(\n                <img\n                    key={`emoji-${match.index}`}\n                    src={`https://blog.tianiel.top/usr/themes/Mirages/usr/biaoqing/furry/${match[1]}.png`}\n                    alt={`furry:${match[1]}`}\n                    className=\"inline-block w-8 h-8 align-text-bottom mx-1\"\n                />\n            );\n            lastIndex = regex.lastIndex;\n        }\n\n        if (lastIndex < text.length) {\n            parts.push(text.substring(lastIndex));\n        }\n\n        return parts.length > 0 ? parts : [text];\n    };\n\n    const getAvatarUrl = (mail: string) => {\n        if (!mail) return null;\n        if (mail.includes('@qq.com')) {\n            const qq = mail.replace('@qq.com', '');\n            if (/^\\d+$/.test(qq)) {\n                return `https://q1.qlogo.cn/g?b=qq&nk=${qq}&s=100`;\n            }\n        }\n\n        // Gravatar fallback for non-QQ emails\n        const hash = MD5(mail.trim().toLowerCase()).toString();\n        // Use Cravatar as a mirror for China (supports Gravatar, QQ, etc.)\n        return `https://cravatar.cn/avatar/${hash}?d=mm`;\n    };\n\n    const avatarUrl = getAvatarUrl(comment.mail);\n\n    const parser = new UAParser(comment.agent);\n    const br = parser.getBrowser();\n    const os = parser.getOS();\n    const uaText = `${os.name ?? '未知系统'}${os.version ? ' ' + os.version : ''} · ${br.name ?? '未知浏览器'}${br.version ? ' ' + br.version : ''}`;\n    const regionText = locationMap[comment.ip] ?? '未知归属地';\n\n    return (\n        <div className=\"relative group bg-[#1F1F1F] border-l-2 border-l-white/10 hover:border-l-ak-cyan transition-colors p-5 mb-4\">\n            {/* Background Lines */}\n            <div className=\"absolute right-0 top-0 w-32 h-full bg-[linear-gradient(90deg,transparent_0%,rgba(255,255,255,0.02)_100%)] pointer-events-none\" />\n\n            {isAdmin && (\n                <button\n                    onClick={() => onDelete(comment.coid.toString())}\n                    disabled={deletingId === comment.coid.toString()}\n                    className=\"absolute top-4 right-4 p-2 text-gray-500 hover:text-red-500 hover:bg-red-500/10 rounded-sm transition-all opacity-0 group-hover:opacity-100 disabled:opacity-50 z-10\"\n                    title=\"Delete Comment\"\n                >\n                    {deletingId === comment.coid.toString() ? <Loader2 size={16} className=\"animate-spin\" /> : <Trash2 size={16} />}\n                </button>\n            )}\n\n            <div className=\"flex gap-4 relative z-10\">\n                <div className=\"shrink-0\">\n                    {avatarUrl ? (\n                        <div className=\"w-12 h-12 relative\">\n                            <img\n                                src={avatarUrl}\n                                alt={comment.author}\n                                className=\"w-full h-full object-cover ak-clip-corner-tl\"\n                            />\n                            <div className=\"absolute inset-0 border border-white/10 ak-clip-corner-tl pointer-events-none\" />\n                        </div>\n                    ) : (\n                        <div className=\"w-12 h-12 bg-ak-cyan/20 text-ak-cyan flex items-center justify-center font-bold ak-clip-corner-tl border border-ak-cyan/30\">\n                            {comment.author.charAt(0).toUpperCase()}\n                        </div>\n                    )}\n                </div>\n                \n                <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex flex-wrap items-center gap-x-3 gap-y-1 mb-2\">\n                        <span className=\"text-white font-bold tracking-wide uppercase\">{comment.author}</span>\n                        <span className=\"text-xs text-ak-cyan font-mono px-1 bg-ak-cyan/10 border border-ak-cyan/20\">\n                            ID: {comment.coid}\n                        </span>\n                        <span className=\"text-xs text-gray-500 font-mono\">\n                            {new Date(comment.created * 1000).toLocaleString()}\n                        </span>\n                    </div>\n                    \n                    <div className=\"flex flex-wrap gap-3 text-[10px] text-gray-600 font-mono mb-3 uppercase tracking-wider\">\n                         <div className=\"flex items-center gap-1\">\n                             <Monitor size={10} /> {uaText}\n                         </div>\n                         <div className=\"flex items-center gap-1\">\n                             <MapPin size={10} /> {regionText}\n                         </div>\n                    </div>\n\n                    <div className=\"text-gray-300 text-sm leading-relaxed break-words whitespace-pre-wrap mb-4 border-l border-white/10 pl-3\">\n                        {parseEmoji(comment.text)}\n                    </div>\n\n                    <div className=\"flex items-center gap-3\">\n                        <button\n                            className=\"text-xs font-bold text-ak-cyan hover:text白 transition-colors flex items-center gap-1 uppercase tracking-wider\"\n                            onClick={() => onReply(comment.author, comment.coid.toString())}\n                        >\n                            <MessageSquare size={12} />\n                            回复此记录\n                        </button>\n                        {descendants.length > 0 && (\n                            <span className=\"text-xs text-gray-600 font-mono\">// 发现 {descendants.length} 条子回复</span>\n                        )}\n                    </div>\n                </div>\n            </div>\n\n            {/* Descendants (Flattened logic from demo) */}\n            {descendants.length > 0 && (\n                <div className=\"mt-4 pl-4 md:pl-12 border-l border-dashed border-white/10 space-y-4\">\n                    {descendants.map(child => (\n                        <div key={child.coid} className=\"relative group bg-[#161616] p-4 border border-white/5\">\n                            {isAdmin && (\n                                <button\n                                    onClick={() => onDelete(child.coid.toString())}\n                                    disabled={deletingId === child.coid.toString()}\n                                    className=\"absolute top-2 right-2 p-1.5 text-gray-500 hover:text-red-500 hover:bg-red-500/10 rounded transition-all opacity-0 group-hover:opacity-100 disabled:opacity-50 z-10\"\n                                >\n                                    {deletingId === child.coid.toString() ? <Loader2 size={14} className=\"animate-spin\" /> : <Trash2 size={14} />}\n                                </button>\n                            )}\n                            <div className=\"flex gap-3\">\n                                <div className=\"shrink-0\">\n                                    {getAvatarUrl(child.mail) ? (\n                                        <div className=\"w-8 h-8 relative\">\n                                            <img\n                                                src={getAvatarUrl(child.mail)!}\n                                                alt={child.author}\n                                                className=\"w-full h-full object-cover\"\n                                            />\n                                        </div>\n                                    ) : (\n                                        <div className=\"w-8 h-8 bg-slate-800 text-gray-400 flex items-center justify-center font-bold text-xs\">\n                                            {child.author.charAt(0).toUpperCase()}\n                                        </div>\n                                    )}\n                                </div>\n                                <div className=\"flex-1 min-w-0\">\n                                    <div className=\"flex items-center gap-2 mb-1\">\n                                        <span className=\"text-gray-200 text-sm font-bold\">{child.author}</span>\n                                        <span className=\"text-[10px] text-gray-600 font-mono uppercase\">\n                                            {new Date(child.created * 1000).toLocaleString()}\n                                        </span>\n                                    </div>\n                                    \n                                    <div className=\"text-gray-400 text-xs mt-1 mb-2\">\n                                        {parseEmoji(child.text)}\n                                    </div>\n                                    \n                                    <button\n                                        className=\"text-[10px] font-bold text-ak-cyan hover:text-white transition-colors uppercase\"\n                                        onClick={() => onReply(child.author, child.coid.toString())}\n                                    >\n                                        回复\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                    ))}\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default function CommentsSection({ postId, isAdmin }: CommentsSectionProps) {\n    const [comments, setComments] = useState<Comment[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [submitting, setSubmitting] = useState(false);\n    const [locationMap, setLocationMap] = useState<Record<string, string>>({});\n    const [popup, setPopup] = useState<{ isOpen: boolean; message: string; type: \"success\" | \"error\" }>({\n        isOpen: false,\n        message: \"\",\n        type: \"success\"\n    });\n\n    // Form State\n    const [commentForm, setCommentForm] = useState({ author: '', mail: '', text: '', parent: '0' });\n    const [replyTo, setReplyTo] = useState<string | null>(null);\n    const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n    // Deleting State\n    const [deletingId, setDeletingId] = useState<string | null>(null);\n\n    // Fetch Comments\n    const fetchComments = async () => {\n        try {\n            const res = await fetch(`https://blog.tianiel.top/api/commentsByCid?cid=${postId}`);\n            const data = await res.json();\n            const list = Array.isArray(data.data) ? data.data : [];\n            const mapped = list.map((c: any) => ({\n                ...c,\n                created: Number(c.created),\n                parent: String(c.parent || '0')\n            }));\n            setComments(mapped);\n        } catch (error) {\n            console.error(\"Failed to fetch comments\", error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        fetchComments();\n    }, [postId]);\n\n    useEffect(() => {\n        const ips = Array.from(new Set(comments.map(c => c.ip).filter(Boolean)));\n        const pending = ips.filter(ip => !(ip in locationMap));\n        if (pending.length === 0) return;\n        Promise.all(\n            pending.map(async ip => {\n                try {\n                    const res = await fetch(`https://whois.pconline.com.cn/ipJson.jsp?ip=${ip}&json=true`);\n                    const data = await res.json();\n                    let region = '未知归属地';\n                    if (data) {\n                        if (typeof (data as any).addr === 'string' && (data as any).addr.trim()) {\n                            region = (data as any).addr.trim();\n                        } else {\n                            const pro = typeof (data as any).pro === 'string' ? (data as any).pro.trim() : '';\n                            const city = typeof (data as any).city === 'string' ? (data as any).city.trim() : '';\n                            const combined = `${pro}${city}`.trim();\n                            if (combined) {\n                                region = combined;\n                            }\n                        }\n                    }\n                    return [ip, region] as [string, string];\n                } catch {\n                    return [ip, '未知归属地'] as [string, string];\n                }\n            })\n        ).then(entries => {\n            const addition: Record<string, string> = {};\n            entries.forEach(([ip, region]) => {\n                addition[ip] = region;\n            });\n            setLocationMap(prev => ({ ...prev, ...addition }));\n        });\n    }, [comments, locationMap]);\n\n\n    // Reply Handler\n    const handleReply = (author: string, parentId: string) => {\n        setReplyTo(author);\n        setCommentForm(prev => ({ ...prev, parent: parentId }));\n        // Scroll to form\n        document.getElementById('comment-form')?.scrollIntoView({ behavior: 'smooth' });\n    };\n\n    // Submit Handler\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setSubmitting(true);\n        try {\n            await fetch('https://blog.tianiel.top/api-comment.php', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\n                body: new URLSearchParams({\n                    cid: postId,\n                    author: commentForm.author,\n                    mail: commentForm.mail,\n                    text: commentForm.text,\n                    parent: commentForm.parent\n                })\n            });\n\n            // Allow success even if API doesn't return standard JSON, just refetch\n            setCommentForm({ author: '', mail: '', text: '', parent: '0' });\n            setReplyTo(null);\n            fetchComments();\n            setPopup({\n                isOpen: true,\n                message: \"评论已提交！感谢您的分享。\\nComment submitted successfully!\",\n                type: \"success\"\n            });\n        } catch (error) {\n            console.error(error);\n            setPopup({\n                isOpen: true,\n                message: \"评论提交失败，请稍后重试。\\nFailed to submit comment.\",\n                type: \"error\"\n            });\n        } finally {\n            setSubmitting(false);\n        }\n    };\n\n    // Delete Handler (Mock or Real if API supports it)\n    const handleDelete = async (id: string) => {\n        if (!confirm(\"⚠️ Are you sure? This action might not be supported by the public API yet.\")) return;\n        setDeletingId(id);\n        \n        setTimeout(() => {\n            setPopup({\n                isOpen: true,\n                message: \"删除功能暂时不可用。\\nDelete functionality requires admin token.\",\n                type: \"error\"\n            });\n            setDeletingId(null);\n        }, 1000);\n    };\n\n    return (\n        <section className=\"mt-16 pt-12 border-t border-ak-cyan/30\">\n            <h2 className=\"text-2xl font-bold text-white mb-8 flex items-center gap-2 uppercase tracking-wider\">\n                <span className=\"text-ak-cyan\">//</span> Communication_Log <span className=\"text-gray-500 text-sm font-normal\">({comments.length})</span>\n            </h2>\n\n            {/* Comment Form */}\n            <div id=\"comment-form\" className=\"mb-12 bg-[#1F1F1F] ak-clip-corner p-6 relative border border-white/5\">\n                <div className=\"absolute top-0 right-0 p-2 opacity-20 pointer-events-none\">\n                     <div className=\"text-[10px] font-mono text-ak-cyan text-right\">INPUT_MODULE_V2</div>\n                </div>\n\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\n                    {replyTo && (\n                        <div className=\"flex items-center gap-2 text-xs text-ak-yellow bg-ak-yellow/10 p-2 border-l-2 border-ak-yellow\">\n                            <span>正在回复：</span>\n                            <span className=\"font-bold\">{replyTo}</span>\n                            <button\n                                type=\"button\"\n                                onClick={() => {\n                                    setReplyTo(null);\n                                    setCommentForm(prev => ({ ...prev, parent: '0' }));\n                                }}\n                                className=\"ml-auto underline hover:text-white\"\n                            >\n                                取消回复\n                            </button>\n                        </div>\n                    )}\n\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        <div className=\"relative group\">\n                            <input\n                                required\n                                placeholder=\"昵称（必填）\"\n                                value={commentForm.author}\n                                onChange={e => setCommentForm({ ...commentForm, author: e.target.value })}\n                                className=\"w-full bg-[#121212] border border-white/10 p-3 text-sm text-white focus:border-ak-cyan outline-none transition-all placeholder:text-gray-600 font-mono\"\n                            />\n                            <div className=\"absolute bottom-0 left-0 h-[1px] w-0 bg-ak-cyan group-focus-within:w-full transition-all duration-300\" />\n                        </div>\n                        <div className=\"relative group\">\n                            <input\n                                type=\"email\"\n                                required\n                                placeholder=\"邮箱（必填，仅用于展示头像与联系）\"\n                                value={commentForm.mail}\n                                onChange={e => setCommentForm({ ...commentForm, mail: e.target.value })}\n                                className=\"w-full bg-[#121212] border border-white/10 p-3 text-sm text-white focus:border-ak-cyan outline-none transition-all placeholder:text-gray-600 font-mono\"\n                            />\n                            <div className=\"absolute bottom-0 left-0 h-[1px] w-0 bg-ak-cyan group-focus-within:w-full transition-all duration-300\" />\n                        </div>\n                    </div>\n\n                    <div className=\"relative group\">\n                        <textarea\n                            ref={textareaRef}\n                            required\n                            placeholder=\"写下你想说的话……\"\n                            rows={4}\n                            value={commentForm.text}\n                            onChange={e => setCommentForm({ ...commentForm, text: e.target.value })}\n                            className=\"w-full bg-[#121212] border border-white/10 p-3 text-sm text-white focus:border-ak-cyan outline-none resize-none transition-all placeholder:text-gray-600 font-mono\"\n                        />\n                        <div className=\"absolute bottom-1 left-0 h-[1px] w-0 bg-ak-cyan group-focus-within:w-full transition-all duration-300\" />\n                    </div>\n\n                    <button\n                        type=\"submit\"\n                        disabled={submitting}\n                        className=\"px-8 py-2 bg-ak-cyan/10 hover:bg-ak-cyan text-ak-cyan hover:text-black border border-ak-cyan rounded-sm font-bold flex items-center gap-2 disabled:opacity-50 transition-all text-sm ml-auto uppercase tracking-widest ak-clip-corner\"\n                    >\n                        {submitting ? <Loader2 className=\"animate-spin\" size={16} /> : <Send size={16} />}\n                        发送评论\n                    </button>\n                </form>\n            </div>\n\n            {/* Comment List */}\n            {loading ? (\n                <div className=\"flex flex-col items-center justify-center py-12 space-y-4\">\n                    <Loader2 className=\"animate-spin text-ak-cyan\" size={32} />\n                    <div className=\"text-xs text-gray-500 font-mono animate-pulse\">正在同步评论数据...</div>\n                </div>\n            ) : comments.length > 0 ? (\n                <div className=\"space-y-6\">\n                    {comments\n                        .filter(c => c.parent === '0')\n                        .sort((a, b) => b.created - a.created)\n                        .map(comment => (\n                            <CommentItem\n                                key={comment.coid}\n                                comment={comment}\n                                allComments={comments}\n                                onReply={handleReply}\n                                isAdmin={isAdmin}\n                                onDelete={handleDelete}\n                                deletingId={deletingId}\n                                locationMap={locationMap}\n                            />\n                        ))}\n                </div>\n            ) : (\n                <div className=\"text-center py-12 border border-dashed border-white/10 bg-[#121212]\">\n                    <p className=\"text-gray-500 font-mono mb-2\">暂时还没有评论</p>\n                    <p className=\"text-xs text-gray-700\">欢迎留下第一条想法。</p>\n                </div>\n            )}\n            \n            <CustomPopup \n                isOpen={popup.isOpen}\n                onClose={() => setPopup(prev => ({ ...prev, isOpen: false }))}\n                message={popup.message}\n                type={popup.type}\n            />\n        </section>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1102, "column": 0}, "map": {"version":3,"sources":["file:///E:/my-geek-blog/src/components/PageTransition.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { motion } from \"framer-motion\";\r\n\r\nexport default function PageTransition({ children }: { children: React.ReactNode }) {\r\n    return (\r\n        <motion.div\r\n            initial={{ opacity: 0, y: 16, scale: 0.98, filter: \"blur(8px)\" }}\n            animate={{ opacity: 1, y: 0, scale: 1, filter: \"blur(0px)\" }}\n            transition={{ duration: 0.7, ease: [0.22, 1, 0.36, 1] }}\n        >\r\n            {children}\r\n        </motion.div>\r\n    );\r\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIe,SAAS,eAAe,EAAE,QAAQ,EAAiC;IAC9E,qBACI,8OAAC,oMAAM,CAAC,GAAG;QACP,SAAS;YAAE,SAAS;YAAG,GAAG;YAAI,OAAO;YAAM,QAAQ;QAAY;QAC/D,SAAS;YAAE,SAAS;YAAG,GAAG;YAAG,OAAO;YAAG,QAAQ;QAAY;QAC3D,YAAY;YAAE,UAAU;YAAK,MAAM;gBAAC;gBAAM;gBAAG;gBAAM;aAAE;QAAC;kBAErD;;;;;;AAGb"}},
    {"offset": {"line": 1208, "column": 0}, "map": {"version":3,"sources":["file:///E:/my-geek-blog/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB"}},
    {"offset": {"line": 1223, "column": 0}, "map": {"version":3,"sources":["file:///E:/my-geek-blog/src/components/Scode.tsx"],"sourcesContent":["import { AlertCircle, CheckCircle2, Info, XCircle, Terminal } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\ntype ScodeType = \"warning\" | \"info\" | \"success\" | \"destructive\";\ntype ScodeSize = \"sm\" | \"md\" | \"lg\";\n\ninterface ScodeProps {\n    type: ScodeType;\n    size?: ScodeSize;\n    children: React.ReactNode;\n    className?: string;\n}\n\nconst icons = {\n    warning: AlertCircle,\n    info: Info,\n    success: CheckCircle2,\n    destructive: XCircle,\n};\n\nconst styles = {\n    warning: \"bg-ak-yellow/10 text-ak-yellow border-ak-yellow/30 hover:border-ak-yellow/60\",\n    info: \"bg-ak-cyan/10 text-ak-cyan border-ak-cyan/30 hover:border-ak-cyan/60\",\n    success: \"bg-green-500/10 text-green-500 border-green-500/30 hover:border-green-500/60\",\n    destructive: \"bg-red-500/10 text-red-500 border-red-500/30 hover:border-red-500/60\",\n};\n\nexport default function Scode({ type = \"info\", size = \"md\", children, className }: ScodeProps) {\n    const Icon = icons[type];\n\n    return (\n        <div className={cn(\n            \"relative flex items-start gap-3 border p-4 my-6 font-mono text-sm leading-relaxed transition-colors group\",\n            // Arknights style clip path\n            \"ak-clip-corner\",\n            styles[type],\n            className\n        )}>\n             {/* Decorative Corner Marker */}\n             <div className=\"absolute top-0 right-0 p-1 opacity-50\">\n                <div className={cn(\"w-2 h-2 border-t border-r\", \n                    type === 'warning' ? 'border-ak-yellow' :\n                    type === 'info' ? 'border-ak-cyan' :\n                    type === 'success' ? 'border-green-500' : 'border-red-500'\n                )} />\n             </div>\n\n            <Icon className=\"w-5 h-5 shrink-0 mt-0.5\" />\n            <div className=\"flex-1 min-w-0\">\n                {children}\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AAAA;AAAA;AACA;;;;AAYA,MAAM,QAAQ;IACV,SAAS,mOAAW;IACpB,MAAM,0MAAI;IACV,SAAS,qOAAY;IACrB,aAAa,uNAAO;AACxB;AAEA,MAAM,SAAS;IACX,SAAS;IACT,MAAM;IACN,SAAS;IACT,aAAa;AACjB;AAEe,SAAS,MAAM,EAAE,OAAO,MAAM,EAAE,OAAO,IAAI,EAAE,QAAQ,EAAE,SAAS,EAAc;IACzF,MAAM,OAAO,KAAK,CAAC,KAAK;IAExB,qBACI,8OAAC;QAAI,WAAW,IAAA,yHAAE,EACd,6GACA,4BAA4B;QAC5B,kBACA,MAAM,CAAC,KAAK,EACZ;;0BAGC,8OAAC;gBAAI,WAAU;0BACZ,cAAA,8OAAC;oBAAI,WAAW,IAAA,yHAAE,EAAC,6BACf,SAAS,YAAY,qBACrB,SAAS,SAAS,mBAClB,SAAS,YAAY,qBAAqB;;;;;;;;;;;0BAIlD,8OAAC;gBAAK,WAAU;;;;;;0BAChB,8OAAC;gBAAI,WAAU;0BACV;;;;;;;;;;;;AAIjB"}},
    {"offset": {"line": 1294, "column": 0}, "map": {"version":3,"sources":["file:///E:/my-geek-blog/src/components/MarkdownRender.tsx"],"sourcesContent":["\"use client\"\n\nimport React from \"react\"\nimport ReactMarkdown from \"react-markdown\"\nimport rehypeHighlight from \"rehype-highlight\"\nimport remarkGfm from \"remark-gfm\"\nimport \"highlight.js/styles/atom-one-dark.css\" // Switch to atom-one-dark for better contrast\nimport Scode from \"./Scode\"\nimport { Components } from \"react-markdown\"\n\ntype ScodeType = \"warning\" | \"info\" | \"success\" | \"destructive\"\ntype ScodeSize = \"sm\" | \"md\" | \"lg\"\n\nfunction preprocessMarkdown(markdownContent: string) {\n    const result: (string | React.ReactElement)[] = []\n    let lastIndex = 0\n\n    // Adjusted regex to match [scode type=\"...\"]...[/scode]\n    const regex = /\\[scode(?:\\s+type=\"([^\"]*)\")?(?:\\s+size=\"([^\"]*)\")?\\]([\\s\\S]*?)\\[\\/scode\\]/g\n    let match\n\n    while ((match = regex.exec(markdownContent)) !== null) {\n\n        if (match.index > lastIndex) {\n            result.push(markdownContent.slice(lastIndex, match.index))\n        }\n\n        // Default to 'info' if type is not specified or invalid, but allow passing string\n        const typeStr = match[1] || \"info\"\n        // Validate type\n        const type = [\"warning\", \"info\", \"success\", \"destructive\"].includes(typeStr)\n            ? typeStr as ScodeType\n            : \"info\"\n\n        const size = (match[2] || \"md\") as ScodeSize\n        const scodeContent = match[3]\n\n        result.push(\n            <Scode key={match.index} type={type} size={size}>\n                {scodeContent}\n            </Scode>\n        )\n\n        lastIndex = match.index + match[0].length\n    }\n\n    if (lastIndex < markdownContent.length) {\n        result.push(markdownContent.slice(lastIndex))\n    }\n\n    return result\n}\n\nexport default function MarkdownRender({ content }: { content: string }) {\n    const components = {\n        img: ({ node, ...props }: React.ImgHTMLAttributes<HTMLImageElement> & { node?: any }) => (\n            <div className=\"relative inline-block my-4\">\n                <img\n                    {...props}\n                    className=\"mx-auto shadow-lg max-w-full h-auto ak-clip-corner border border-white/10\"\n                    style={{ maxHeight: 600, objectFit: \"contain\" }}\n                    alt={props.alt || \"\"}\n                />\n                 {/* Decorative corners for images */}\n                 <div className=\"absolute -bottom-1 -right-1 w-4 h-4 border-b-2 border-r-2 border-ak-cyan opacity-50 pointer-events-none\"></div>\n            </div>\n        ),\n        pre: ({ node, ...props }: React.HTMLAttributes<HTMLPreElement> & { node?: any }) => (\n            <div className=\"relative group\">\n                <div className=\"absolute top-0 right-0 px-2 py-1 bg-white/5 text-[10px] text-gray-500 font-mono rounded-bl\">CODE_BLOCK</div>\n                <pre\n                    {...props}\n                    className=\"ak-clip-corner p-0 overflow-hidden shadow-lg my-8 bg-[#1a1a1a] border-l-2 border-white/10 group-hover:border-ak-cyan transition-colors\"\n                />\n            </div>\n        ),\n        code: ({ node, className, children, ...props }: React.HTMLAttributes<HTMLElement> & { node?: any, className?: string }) => {\n            const match = /language-(\\w+)/.exec(className || '')\n            const isInline = !match && !String(children).includes('\\n')\n\n            return (\n                <code\n                    {...props}\n                    className={className}\n                    style={isInline ? {\n                        fontSize: '0.9em',\n                        backgroundColor: 'rgba(35, 173, 229, 0.1)', // ak-cyan tint\n                        color: '#23ADE5', // ak-cyan\n                        padding: '0.2em 0.4em',\n                        borderRadius: '0px', // Sharp corners\n                        fontFamily: 'var(--font-mono)',\n                    } : undefined}\n                >\n                    {children}\n                </code>\n            )\n        },\n        a: ({ node, ...props }: React.AnchorHTMLAttributes<HTMLAnchorElement> & { node?: any }) => (\n            <a\n                {...props}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"text-ak-cyan hover:text-ak-yellow hover:underline decoration-dashed underline-offset-4 transition-colors\"\n            />\n        ),\n        blockquote: ({ node, ...props }: React.QuoteHTMLAttributes<HTMLQuoteElement> & { node?: any }) => (\n            <blockquote {...props} className=\"border-l-4 border-ak-yellow bg-ak-yellow/5 py-2 px-4 italic text-gray-400 my-6\" />\n        ),\n        hr: ({ node, ...props }: React.HTMLAttributes<HTMLHRElement> & { node?: any }) => (\n            <hr {...props} className=\"border-t border-dashed border-white/20 my-8 relative after:content-['//'] after:absolute after:left-1/2 after:-top-3 after:-translate-x-1/2 after:bg-[#050505] after:px-2 after:text-gray-600 after:text-xs\" />\n        )\n    } as Components\n\n    const processedContent = preprocessMarkdown(content || \"\")\n\n    return (\n        <div className=\"prose prose-invert max-w-none prose-headings:font-mono prose-headings:font-bold prose-p:text-gray-400 prose-li:text-gray-400\">\n            {processedContent.map((part, index) => {\n                if (React.isValidElement(part)) {\n                    return part\n                }\n                return (\n                    <ReactMarkdown\n                        key={index}\n                        components={components}\n                        remarkPlugins={[remarkGfm]}\n                        rehypePlugins={[rehypeHighlight]}\n                    >\n                        {part as string}\n                    </ReactMarkdown>\n                )\n            })}\n        </div>\n    )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAEA;AAPA;;;;;;;;AAaA,SAAS,mBAAmB,eAAuB;IAC/C,MAAM,SAA0C,EAAE;IAClD,IAAI,YAAY;IAEhB,wDAAwD;IACxD,MAAM,QAAQ;IACd,IAAI;IAEJ,MAAO,CAAC,QAAQ,MAAM,IAAI,CAAC,gBAAgB,MAAM,KAAM;QAEnD,IAAI,MAAM,KAAK,GAAG,WAAW;YACzB,OAAO,IAAI,CAAC,gBAAgB,KAAK,CAAC,WAAW,MAAM,KAAK;QAC5D;QAEA,kFAAkF;QAClF,MAAM,UAAU,KAAK,CAAC,EAAE,IAAI;QAC5B,gBAAgB;QAChB,MAAM,OAAO;YAAC;YAAW;YAAQ;YAAW;SAAc,CAAC,QAAQ,CAAC,WAC9D,UACA;QAEN,MAAM,OAAQ,KAAK,CAAC,EAAE,IAAI;QAC1B,MAAM,eAAe,KAAK,CAAC,EAAE;QAE7B,OAAO,IAAI,eACP,8OAAC,sIAAK;YAAmB,MAAM;YAAM,MAAM;sBACtC;WADO,MAAM,KAAK;;;;;QAK3B,YAAY,MAAM,KAAK,GAAG,KAAK,CAAC,EAAE,CAAC,MAAM;IAC7C;IAEA,IAAI,YAAY,gBAAgB,MAAM,EAAE;QACpC,OAAO,IAAI,CAAC,gBAAgB,KAAK,CAAC;IACtC;IAEA,OAAO;AACX;AAEe,SAAS,eAAe,EAAE,OAAO,EAAuB;IACnE,MAAM,aAAa;QACf,KAAK,CAAC,EAAE,IAAI,EAAE,GAAG,OAAmE,iBAChF,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBACI,GAAG,KAAK;wBACT,WAAU;wBACV,OAAO;4BAAE,WAAW;4BAAK,WAAW;wBAAU;wBAC9C,KAAK,MAAM,GAAG,IAAI;;;;;;kCAGrB,8OAAC;wBAAI,WAAU;;;;;;;;;;;;QAGxB,KAAK,CAAC,EAAE,IAAI,EAAE,GAAG,OAA8D,iBAC3E,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;kCAA6F;;;;;;kCAC5G,8OAAC;wBACI,GAAG,KAAK;wBACT,WAAU;;;;;;;;;;;;QAItB,MAAM,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAA+E;YAClH,MAAM,QAAQ,iBAAiB,IAAI,CAAC,aAAa;YACjD,MAAM,WAAW,CAAC,SAAS,CAAC,OAAO,UAAU,QAAQ,CAAC;YAEtD,qBACI,8OAAC;gBACI,GAAG,KAAK;gBACT,WAAW;gBACX,OAAO,WAAW;oBACd,UAAU;oBACV,iBAAiB;oBACjB,OAAO;oBACP,SAAS;oBACT,cAAc;oBACd,YAAY;gBAChB,IAAI;0BAEH;;;;;;QAGb;QACA,GAAG,CAAC,EAAE,IAAI,EAAE,GAAG,OAAuE,iBAClF,8OAAC;gBACI,GAAG,KAAK;gBACT,QAAO;gBACP,KAAI;gBACJ,WAAU;;;;;;QAGlB,YAAY,CAAC,EAAE,IAAI,EAAE,GAAG,OAAqE,iBACzF,8OAAC;gBAAY,GAAG,KAAK;gBAAE,WAAU;;;;;;QAErC,IAAI,CAAC,EAAE,IAAI,EAAE,GAAG,OAA6D,iBACzE,8OAAC;gBAAI,GAAG,KAAK;gBAAE,WAAU;;;;;;IAEjC;IAEA,MAAM,mBAAmB,mBAAmB,WAAW;IAEvD,qBACI,8OAAC;QAAI,WAAU;kBACV,iBAAiB,GAAG,CAAC,CAAC,MAAM;YACzB,kBAAI,gNAAK,CAAC,cAAc,CAAC,OAAO;gBAC5B,OAAO;YACX;YACA,qBACI,8OAAC,mMAAa;gBAEV,YAAY;gBACZ,eAAe;oBAAC,wJAAS;iBAAC;gBAC1B,eAAe;oBAAC,8JAAe;iBAAC;0BAE/B;eALI;;;;;QAQjB;;;;;;AAGZ"}}]
}